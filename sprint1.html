<!DOCTYPE html>
<html>

<head>
    <title>Sprint 1</title>
    <style>
        table{
            border-color: black;
            border-width: 10px;
        }
    </style>
</head>

<body>
    <input type="file" id="inputFile" accept=".csv">
    <pre id="csvData"></pre>
    <textarea name="" id="taResults" cols="100" rows="10"></textarea>
    <button id="btnView">click here to view the data</button>
    <script>

        let myArray;
        document.getElementById("btnView").addEventListener('click',viewArray)
        // Function to handle when a CSV file is selected
        document.getElementById('inputFile').addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const csvData = e.target.result;
                    const csvArray = csvToArray(csvData);
                    document.getElementById('taResults').value = JSON.stringify(csvArray, null);
                };
                reader.readAsText(file);
            }
        });

        // Function to convert CSV data into an array
        function csvToArray(csvData) {
            const rows = csvData.split('\n');
            const result = [];

            rows.forEach(row => {
                const columns = row.split(',');
                result.push(columns);
            });
            myArray = result

            return result;
        }
        console.log(myArray)

        function viewArray() {
            //create a Table Object
            let table = document.createElement('table');
            //iterate over every array(row) within tableArr
            for (let row of myArray) {
                //Insert a new row element into the table element
                table.insertRow();
                //Iterate over every index(cell) in each array(row)
                for (let cell of row) {
                    //While iterating over the index(cell)
                    //insert a cell into the table element
                    let newCell = table.rows[table.rows.length - 1].insertCell();
                    //add text to the created cell element
                    newCell.textContent = cell;
                }
            }
            //append the compiled table to the DOM
            document.body.appendChild(table);
        }


    </script>
</body>

</html>
